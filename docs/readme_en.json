{"type":"Document","children":[{"type":"Heading","level":0,"useIndex":true,"content":[{"type":"Text","value":"What is Minditor"}]},{"type":"Paragraph","id":6,"content":[{"type":"Text","value":"Minditor is a block-level rich text editor that prioritizes both the end-user editing experience and the developer experience. It boasts the following features:"}]},{"type":"OLItem","level":0,"content":[{"type":"Text","value":"It provides essential components and plugins, such as image uploading and markdown commands, which are continuously improved by the official team. The goal is to offer a user experience that matches professional editing tools by default.\n"}]},{"level":0,"type":"OLItem","content":[{"type":"Text","value":"It supports InlineBlock for inline insertion.\n"}]},{"level":0,"type":"OLItem","content":[{"type":"Text","value":"Editor Blocks/InlineBlocks can be implemented with components from any framework.\n"}]},{"level":0,"type":"OLItem","content":[{"type":"Text","value":" Beyond common events and APIs, the Plugin system also offers developers a set of important reactive states by default, simplifying the development of Plugins.\n"}]},{"type":"Paragraph","content":[{"type":"Text","value":""},{"type":"Text","value":"This document is created and rendered using Minditor, allowing you to quickly experience its functionalities on this page. Have fun","formats":{"color":"rgb(36, 91, 219)"}},{"type":"Text","value":"!"}]},{"type":"Heading","level":0,"useIndex":true,"content":[{"type":"Text","value":"Editing"}]},{"type":"Heading","useIndex":true,"level":1,"content":[{"type":"Text","value":"Copy/Paste/Cut/Redo/Undo"}]},{"type":"Paragraph","content":[{"type":"Text","value":"By default, it supports right-click context menus and keyboard shortcuts for copy, paste, cut, undo, and redo."},{"type":"Text","value":"\n"}]},{"type":"Heading","level":1,"useIndex":true,"content":[{"type":"Text","value":"markdown commands"}]},{"type":"Paragraph","content":[{"type":"Text","value":"Minditor provides the following commands for quick editing:"}]},{"type":"ULItem","level":0,"content":[{"type":"Text","value":"Type "},{"type":"InlineCode","value":"#"},{"type":"Text","value":" followed by a space to insert a Heading. The number of "},{"type":"InlineCode","value":"#"},{"type":"Text","value":" symbols determines the level of the Heading."}]},{"level":1,"type":"ULItem","content":[{"type":"Text","value":"  Type "},{"type":"InlineCode","value":"1. + [Space]"},{"type":"Text","value":" within a Heading to insert an automatic numbering."}]},{"level":0,"type":"ULItem","content":[{"type":"Text","value":"Type "},{"type":"InlineCode","value":"- + [Space]"},{"type":"Text","value":" at the beginning of a paragraph to insert an unordered list."}]},{"level":0,"type":"ULItem","content":[{"type":"Text","value":"Type "},{"type":"InlineCode","value":"1. + [Space]"},{"type":"Text","value":"at the beginning of a paragraph to insert an ordered list."}]},{"level":0,"type":"ULItem","content":[{"type":"Text","value":"Type "},{"type":"InlineCode","value":"` + [ANY_CHARS] + `"},{"type":"Text","value":" to insert Inline Code."}]},{"level":0,"type":"ULItem","content":[{"type":"Text","value":"Type "},{"type":"InlineCode","value":"``` + [Language Name]"},{"type":"Text","value":" at  the beginning of a paragraph to "},{"type":"Text","value":" insert a code editor."}]},{"type":"Heading","level":1,"useIndex":true,"content":[{"type":"Text","value":"Range Tool Plugin"}]},{"type":"Paragraph","content":[{"type":"Text","value":"Hovering over selected text with the mouse will display a floating toolbar, allowing you to change font styles or create links."}]},{"type":"Image","content":[],"src":"/rangeToolPlugin.png"},{"type":"Heading","level":1,"useIndex":true,"content":[{"type":"Text","value":"Insert Suggession Plugin"}]},{"type":"Paragraph","content":[{"type":"Text","value":"Typing "},{"type":"InlineCode","value":"/"},{"type":"Text","value":" will trigger a dropdown menu, offering components that can be inserted. If "},{"type":"InlineCode","value":"/"},{"type":"Text","value":" is entered at the beginning of an empty line, both Blocks and InlineBlocks available for insertion will appear simultaneously."}]},{"type":"Image","content":[],"src":"/suggessionToolPlugin.png"},{"type":"Heading","level":1,"useIndex":true,"content":[{"type":"Text","value":"Block Tool Plugin"}]},{"type":"Paragraph","content":[{"type":"Text","value":"Moving the mouse over any Block will display a floating toolbar on the left side, offering default tools for deletion, copying, pasting, and inserting Blocks."}]},{"type":"Heading","level":1,"useIndex":true,"content":[{"type":"Text","value":"Table of contents Plugin"}]},{"type":"Paragraph","content":[{"type":"Text","value":"Minditor supports displaying an outline composed of Headings outside the document, as shown on the left side of this document."}]},{"type":"Heading","level":1,"useIndex":true,"content":[{"type":"Text","value":"Image Block"}]},{"type":"Paragraph","content":[{"type":"Text","value":"The image component in Minditor allows users to upload images to a specified interface or an AWS S3 bucket, or to save images directly into the document using URL.createObjectURL for encoding. Minditor already includes a default component, InlineImageBlock, for encoding and saving images into the document."}]},{"type":"Image","content":[],"src":"/imageBlock.gif"},{"type":"Paragraph","content":[{"type":"Text","value":"You can also use "},{"type":"InlineCode","value":"createImageBlock"},{"type":"Text","value":" with the appropriate parameters to create a component that uploads images to a specified address:"}]},{"type":"Code","value":"import {createImageBlock} from 'minditor'\n\n// @params\n// - type: 'xhr'|'aws'\n// - config: Uppy.XHRConfig|Uppy.AWS3Config\nconst ImageBlock = createImageBlock(\n  'xhr', \n  {endpoint: 'https://your-domain.com/upload'}\n)","language":"tsx"},{"type":"Paragraph","content":[{"type":"Text","value":"The Image Block utilizes Uppy as the upload tool. For more configuration options, refer to"},{"type":"Text","value":" "},{"type":"Link","href":"https://uppy.io/docs/xhr-upload/ ","alt":"https://uppy.io/docs/xhr-upload/ "},{"type":"Text","value":" "}]},{"type":"Heading","level":1,"useIndex":true,"content":[{"type":"Text","value":"Grid Block"}]},{"type":"Paragraph","content":[{"type":"Text","value":"The cells in the Grid block support all document capabilities, equivalent to an embedded mini-document. You can insert a Grid at an empty paragraph using the Block Tool on the left. It can also be obtained through the Insert Suggestion Plugin by typing '/' at the beginning of a paragraph. The features supported by Grid include:"}]},{"type":"Grid","columns":[266,100],"data":[[{"type":"Document","children":[{"type":"Paragraph","content":[{"type":"Text","value":"Feature"}]}]},{"type":"Document","children":[{"type":"Paragraph","content":[{"type":"Text","value":"Support"}]}]}],[{"type":"Document","children":[{"type":"Paragraph","content":[{"type":"Text","value":"Delete Row"}]}]},{"type":"Document","children":[{"type":"Paragraph","content":[{"type":"Text","value":"Yes"}]}]}],[{"type":"Document","children":[{"type":"Paragraph","content":[{"type":"Text","value":"Delete Column"}]}]},{"type":"Document","children":[{"type":"Paragraph","content":[{"type":"Text","value":"Yes"}]}]}],[{"type":"Document","children":[{"type":"Paragraph","content":[{"type":"Text","value":"Resize Colunm Width"}]}]},{"type":"Document","children":[{"type":"Paragraph","content":[{"type":"Text","value":"Yes"}]}]}],[{"type":"Document","children":[{"type":"Paragraph","content":[{"type":"Text","value":"Resize Row Height"}]}]},{"type":"Document","children":[{"type":"Paragraph","content":[{"type":"Text","value":"No","formats":{"color":"rgb(216, 57, 49)"}}]}]}],[{"type":"Document","children":[{"type":"Paragraph","content":[{"type":"Text","value":"Full Document Funtionalities"}]}]},{"type":"Document","children":[{"type":"Paragraph","content":[{"type":"Text","value":"Yes"}]}]}],[{"type":"Document","children":[{"type":"Paragraph","content":[{"type":"Text","value":"Relocate Column"}]}]},{"type":"Document","children":[{"type":"Paragraph","content":[{"type":"Text","value":"No","formats":{"color":"rgb(216, 57, 49)"}}]}]}],[{"type":"Document","children":[{"type":"Paragraph","content":[{"type":"Text","value":"Relocate Row"}]}]},{"type":"Document","children":[{"type":"Paragraph","content":[{"type":"Text","value":"No","formats":{"color":"rgb(216, 57, 49)"}}]}]}]],"content":[]},{"type":"Paragraph","content":[{"type":"Text","value":"We are currently developing a more powerful spreadsheet tool, which includes enhanced layout and data processing capabilities. This tool will also be integrated into Minditor as a component in the future, so there are no extensive enhancement plans for the current Grid."}]},{"type":"Heading","level":1,"useIndex":true,"content":[{"type":"Text","value":"Code Block"}]},{"type":"Paragraph","content":[{"type":"Text","value":"Minditor utilizes CodeMirror 6 for its Code component. By default, it supports the following languages:"}]},{"type":"ULItem","level":0,"content":[{"type":"Text","value":"javascript (alias js/jsx)"}]},{"level":0,"type":"ULItem","content":[{"type":"Text","value":"typescript (alias ts/tsx)"}]},{"level":0,"type":"ULItem","content":[{"type":"Text","value":"python"}]},{"level":0,"type":"ULItem","content":[{"type":"Text","value":"php"}]},{"level":0,"type":"ULItem","content":[{"type":"Text","value":"cpp"}]},{"level":0,"type":"ULItem","content":[{"type":"Text","value":"java"}]},{"level":0,"type":"ULItem","content":[{"type":"Text","value":"sql"}]},{"level":0,"type":"ULItem","content":[{"type":"Text","value":"json"}]},{"level":0,"type":"ULItem","content":[{"type":"Text","value":"rust"}]},{"level":0,"type":"ULItem","content":[{"type":"Text","value":"css"}]},{"level":0,"type":"ULItem","content":[{"type":"Text","value":"html"}]},{"level":0,"type":"ULItem","content":[{"type":"Text","value":"sass"}]},{"level":0,"type":"ULItem","content":[{"type":"Text","value":"less"}]},{"level":0,"type":"ULItem","content":[{"type":"Text","value":"xml"}]},{"level":0,"type":"ULItem","content":[{"type":"Text","value":"yalml"}]},{"type":"Paragraph","content":[{"type":"Text","value":"You can insert a Code Block for a specific language by typing Deve"},{"type":"InlineCode","value":"``` + [Language Name]"},{"type":"Text","value":" at the beginning of a paragraph. It can also be inserted using the Block Tool or the Suggestion Tool."}]},{"type":"Heading","level":0,"useIndex":true,"content":[{"type":"Text","value":"lopment"}]},{"type":"Heading","level":1,"useIndex":true,"content":[{"type":"Text","value":"Installation and Initialization"}]},{"type":"Code","value":"npm i minditor","language":"tsx"},{"type":"Paragraph","content":[{"type":"Text","value":"Minditor itself can be rendered in any DOM node without any external requirements for layout or style.\nIf you are using it to render the simplest text, you can render it directly using the following method:"}]},{"type":"Code","value":"import {\n    Code,\n    Grid,\n    Heading,\n    InlineImageBlock,\n    InlineCode,\n    Link,\n    OLItem,\n    Paragraph,\n    Text,\n    ULItem\n    InlineImageBlock\n} from \"minditor\";\n\nconst rootElement = document.getElementById('root')!\nconst types = {\n    Paragraph,\n    Text,\n    Heading,\n    OLItem,\n    ULItem,\n    InlineCode,\n    Code,\n    Link,\n    Grid,\n    Image: InlineImageBlock\n}\nconst data = {\n    name: 'MyDoc',\n    children: [{\n        type: 'Paragraph',\n        content: [{type:'Text', value: 'This is my first document.'}]\n    }]\n}\n\nconst doc = new Document(rootElement, data, types)\ndoc.render()","language":"tsx"},{"type":"Paragraph","content":[{"type":"Text","value":"For scenarios that require a complete Plugin and where the view's height automatically adapts to the external container, we recommend using "},{"type":"InlineCode","value":"scaffold"},{"type":"Text","value":" to create the view:"}]},{"type":"Code","value":"import {\n    Code,\n    createBlockTool,\n    createRangeTool,\n    createSuggestionTool,\n    defaultBlockWidgets,\n    defaultFormatWidgets,\n    defaultMarkdownPlugins,\n    defaultSuggestionWidgets,\n    Grid,\n    Heading,\n    InlineImageBlock,\n    InlineCode,\n    Link,\n    OLItem,\n    Paragraph,\n    scaffold,\n    Text,\n    ULItem,\n    createTOCTool\n} from \"minditor\";\n\nconst root= document.getElementById('root')!\nconst types = {\n    Paragraph,\n    Text,\n    Heading,\n    OLItem,\n    ULItem,\n    InlineCode,\n    Code,\n    Link,\n    Grid,\n    Image: InlineImageBlock\n}\n\nconst plugins = [\n    ...defaultMarkdownPlugins,\n    createBlockTool(defaultBlockWidgets),\n    createRangeTool( defaultFormatWidgets ),\n    createSuggestionTool(defaultSuggestionWidgets),\n    createTOCTool()\n]\nconst result = scaffold(root, {data: jsonData, types, plugins}, { debug: true })\nresult.render()","language":"tsx"},{"type":"Heading","level":1,"useIndex":true,"content":[{"type":"Text","value":"Developing"},{"type":"Text","value":" InlineBlock"}]},{"type":"Paragraph","content":[{"type":"Text","value":"InlineBlock can be embedded inline, and developing an InlineBlock is quite straightforward. Let's take InlineCode as an example:"}]},{"type":"Code","value":"export class InlineCode extends InlineComponent {\n    static displayName = 'InlineCode'\n    constructor(public data: InlineCodeData) {\n        super();\n    }\n    render()  {\n        return <span style={{display:'inline-block', background:'#eee', padding:'4px 8px'}}>{this.data.value}</span>\n    }\n    toText() {\n        return this.data.value\n    }\n}","language":"tsx"},{"type":"Paragraph","content":[{"type":"Text","value":"After having an InlineBlock, it's necessary to provide users with methods to use it. There are three ways:"}]},{"type":"OLItem","level":0,"content":[{"type":"Text","value":"Display a Widget in Minditor's SuggestionTool. When the user types "},{"type":"InlineCode","value":"/"},{"type":"Text","value":", a dropdown menu will appear showing this Block, which they can click to use.\n"}]},{"level":0,"type":"OLItem","content":[{"type":"Text","value":"Implement a Plugin that listens for specific user inputs and inserts an InlineBlock when the input meets certain conditions, similar to markdown.\n"}]},{"type":"Paragraph","content":[{"type":"Text","value":"As an example, let's see how to create a Widget for a Range Tool that adds font color and background color:"}]},{"type":"Code","value":"class ColorWidget extends RangeWidget {\n    static displayName = `ColorRangeWidget`\n    useColor = (color: string) => {\n        this.document.view.formatCurrentRange({color})\n    }\n    useBackgroundColor = (backgroundColor: string) => {\n        this.document.view.formatCurrentRange({backgroundColor})\n    }\n\n    render() {\n        const hover = atom(false)\n\n        const pickerStyle = () => {\n            return ({\n                display: hover() ? 'block' : 'none',\n                position: 'absolute',\n                top: '100%',\n                left: 0,\n                transform: 'translateX(-50%)',\n            })\n        }\n\n        const picker = (\n            <div style={pickerStyle}>\n                <ColorPicker onColorClick={this.useColor} onBackgroundColorClick={this.useBackgroundColor}/>\n            </div>\n        )\n        return (\n            <div style={{display:'flex', position:'relative', width:24, height:24, alignItems: 'center',justifyContent: 'center'}}\n                 onmouseenter={() => hover(true)}\n                 onmouseleave={() => hover(false)}\n            >\n                <span style={{cursor: 'pointer',marginLeft:8, fontSize:18}}>A</span>\n                {picker}\n            </div>\n        )\n    }\n}","language":"tsx"},{"type":"Paragraph","content":[{"type":"Text","value":"With this widget in place, you can use it by passing it into the createRangeTool function:"}]},{"type":"Code","value":"const plugins = [\n    //...  other plugins\n    createRangeTool( [...defaultFormatWidgets, ColorWidget] ),\n]","language":"tsx"},{"type":"Paragraph","content":[{"type":"Text","value":"For the development of Plugins, more detailed examples are provided below."}]},{"type":"Heading","level":1,"useIndex":true,"content":[{"type":"Text","value":"Developing Block"}]},{"type":"Paragraph","content":[{"type":"Text","value":"Developing a Block Component is fundamentally similar to developing an Inline Component. The difference is in how it's made available for user use; it is registered within the BlockTool or Insert Suggestion Tool for user access. Note that Widgets in the BlockTool and those in the Insert Suggestion Tool are interchangeable. To further simplify the development of Widgets, Minditor provides a "},{"type":"InlineCode","value":"createSuggestionWidget"},{"type":"Text","value":" function to assist in rapid widget development. Here, we take the insertion of a Code Widget as an example:"}]},{"type":"Code","value":"type CommonInsertHandleProps = {\n    insert: (initialData: InlineData|BlockData) => void\n}\n\nfunction CodeInsertHandle({insert}: CommonInsertHandleProps) {\n    const onGridChange = (lang: string) => {\n        insert({type: 'Code', language:lang, value: '', content: []})\n        activated(false)\n    }\n    const activated = atom(false)\n\n    const languages = Object.keys(CodeBlock.langToPlugin)\n\n    return (\n        <div\n            style={{\n                position: 'relative',\n                display: 'flex',\n                alignItems: 'center',\n                justifyContent: 'flex-start',\n                cursor: 'pointer',\n                width: '100%'\n            }}\n            onmouseenter={() => activated(true)}\n            onmouseleave={() => activated(false)}\n        >\n            <Code size={18}/>\n            <span style={{marginLeft: 8, fontSize: 14,  whiteSpace:'nowrap'}}>+ Code</span>\n            <Right size={18}/>\n\n            <div style={() => ({\n                display: activated() ? 'block' : 'none',\n                position: 'absolute',\n                left: 'calc(100% - 8px)',\n                top: 0,\n                transform: 'translateY(-50%)',\n                paddingLeft: 18,\n                background: 'transparent',\n            })}\n            >\n                <div style={{\n                    border: '1px solid #eee',\n                    background: '#fff',\n                    boxShadow: '2px 2px 5px #dedede',\n                    maxHeight: 400,\n                    overflowY: 'auto'\n                }}\n                >\n                    <CodeLanguagePicker onChange={onGridChange} languages={languages}/>\n                </div>\n            </div>\n        </div>\n    )\n} \n\nconst CodeBlockWidget = createSuggestionWidget(CodeInsertHandle, 'Code', true),","language":"ts"},{"type":"Heading","level":2,"useIndex":true,"content":[{"type":"Text","value":"Developing Block with React"}]},{"type":"Paragraph","content":[{"type":"Text","value":"We will demonstrate how to develop a Block using React to create a Calendar block as example."}]},{"type":"Code","value":"import { Component } from 'minditor'\nimport { createElement } from 'react';\nimport { createRoot } from 'react-dom/client';\n\nclass Calendar extends Component {\n    static displayName = 'Calendar'\n    render() {\n        const container = document.createElement('div')\n        container.contentEditable = 'false'\n        const root = createRoot(container);\n        root.render(createElement(DayPicker, {mode: 'single'}));\n        return container\n    }\n}","language":"tsx"},{"type":"Heading","level":1,"useIndex":true,"content":[{"type":"Text","value":"Developing Plugin"}]},{"type":"Paragraph","content":[{"type":"Text","value":"In Minditor, a Plugin has the capability to control the entire document, allowing for the fulfillment of nearly any requirement. It can execute one-time commands based on user input, and also possesses its own independent interface to support more complex operations."}]},{"type":"Heading","level":2,"useIndex":true,"content":[{"type":"Text","value":"Execute One-time Commands"}]},{"type":"Paragraph","content":[{"type":"Text","value":"Let's take the ability to add Headings in markdown as an example to see how to develop a Plugin."}]},{"type":"Code","value":"class Plugin extends Plugin{\n    public static displayName = `createHeading`\n    public static activateEvents = {\n        inputChar: onInputKey(' ')\n    }\n    run({} : PluginRunArgv) : boolean | undefined{\n        const initialCharacters = '#'\n        const { view, history } = this.document\n        const startRange = view.state.selectionRange()\n        const { startText,  startBlock,  isEndFull,isCollapsed, endText } = startRange!\n        //  1. Headings can only be generated within the content of a Para.\n        if (!(startBlock instanceof Paragraph || startBlock instanceof Heading)) return false\n        // 2. Can only at Para head.\n        if (startBlock.firstChild !== startText) return false\n        // 3. Text in startText should match #\n        if (startText.data.value.slice(0, initialCharacters.length) !== initialCharacters) return false\n\n        // 4. delete last space\n        const textToMatch = startText.data.value.slice(0, startText.data.value.length - 1)\n        const matchedText = reversMatchStr(textToMatch, initialCharacters)\n        if (matchedText === false) return false\n\n        // Start replacing\n        history.openPacket(startRange)\n        // 1. Delete initialCharacters and space in startText\n        const newTextAfterCursor = startText.data.value.slice(initialCharacters.length + 1)\n        view.updateText(newTextAfterCursor, startText)\n        // 2. Get all text in the middle\n        const titleTextFrag = view.deleteBetween(startText, null, startBlock)\n        // 3. Replace with new Heading block\n        const newBlock = createBlock.call(this, titleTextFrag)\n        view.replace(newBlock, startBlock, this.document.content)\n        view.setCursor(newBlock, 0)\n        const endRange = new DocRange(newBlock, newBlock.firstChild!, 0, newBlock, newBlock.firstChild!, 0, )\n        history.closePacket(endRange)\n        return true\n    }\n}","language":"tsx"},{"type":"Heading","level":2,"useIndex":true,"content":[{"type":"Text","value":"Rendering UI"}]},{"type":"Paragraph","content":[{"type":"Text","value":"The Plugin uses a lightweight, responsive frontend framework called Axii to render the UI. Developers only need to remember the following basic usage: "}]},{"type":"ULItem","level":0,"content":[{"type":"Text","value":"Wrap the required data with "},{"type":"InlineCode","value":"atom()"},{"type":"Text","value":" for reactive access and manipulation through function calls. "},{"type":"Text","value":"\n"}]},{"level":0,"type":"ULItem","content":[{"type":"Text","value":"Use "},{"type":"InlineCode","value":"computed"},{"type":"Text","value":" to wrap computed data. "},{"type":"Text","value":"\n"}]},{"level":0,"type":"ULItem","content":[{"type":"Text","value":"For maintaining a reactive DOM structure/attribute, use functions to represent them without the need for computed wrapping. "}]},{"type":"Paragraph","content":[{"type":"Text","value":"Let's take the Range Tool as an example to see how to use Axii and the system-provided reactive state to build a responsive interface."}]},{"type":"Code","value":"class OneRangeTool extends RangeTool {\n    public rangeWidgets: RangeWidget[]\n\n    constructor(public document: Document) {\n        super(document);\n        this.rangeWidgets = RangeWidgets.map(RangeWidgetClass => {\n            return new RangeWidgetClass(this.document)\n        })\n    }\n    calculatePosition(outsideDocBoundary: boolean) {\n        const {visibleRangeRect, lastMouseUpPositionAfterRangeChange, selectionRange, hasRange} = this.document.view.state\n\n        const positionAttrs = {\n            position: 'fixed'\n        } as any\n\n        positionAttrs.position = 'fixed'\n        // Decide modal position based on last mouse position\n        if (lastMouseUpPositionAfterRangeChange()!.top > (visibleRangeRect.raw!.top + visibleRangeRect.raw!.height / 2)) {\n            positionAttrs.top = visibleRangeRect.raw!.top + visibleRangeRect.raw!.height\n            positionAttrs.bottom = undefined \n        } else {\n            positionAttrs.top = undefined \n            positionAttrs.bottom = -(visibleRangeRect.raw!.top)\n        }\n        positionAttrs.left = lastMouseUpPositionAfterRangeChange()!.left\n\n        // If the plugin UI is in same container with content, use 'absolute' position.\n        if(!outsideDocBoundary) {\n            const boundaryRect = this.document.view.getContainerBoundingRect()!\n            positionAttrs.position = 'absolute'\n            if (lastMouseUpPositionAfterRangeChange()!.top > (visibleRangeRect.raw!.top + visibleRangeRect.raw!.height / 2)) {\n                positionAttrs.top -= boundaryRect.top\n            } else {\n                positionAttrs.bottom += boundaryRect.top\n            }\n            positionAttrs.left -= boundaryRect.left\n\n        }\n        return positionAttrs\n    }\n    render(outsideDocBoundary: boolean) {\n        const style = () => {\n            const { lastMouseUpPositionAfterRangeChange, hasRange} = this.document.view.state\n            if (!lastMouseUpPositionAfterRangeChange() || !hasRange()){\n                return {display: 'none'}\n            }\n\n            const positionAttrs = this.calculatePosition(outsideDocBoundary)\n\n            return {\n                display: 'block',\n                ...positionAttrs,\n            }\n        }\n\n        return <div style={style} data-testid=\"rangeTool-container\">\n            <div style={{display:'flex', whiteSpace: 'nowrap'}}>\n                {() => this.rangeWidgets.map((widget: RangeWidget) => {\n                    return widget.render()\n                })}\n            </div>\n        </div>\n    }\n}","language":"tsx"},{"type":"Heading","level":2,"useIndex":true,"content":[{"type":"Text","value":"Build-in Reactive State"}]},{"type":"Paragraph","content":[{"type":"Text","value":"The system provides the following built-in Reactive State:"}]},{"type":"ULItem","level":0,"content":[{"type":"Text","value":"lastActiveDeviceType: The user's last active device, either mouse or keyboard."}]},{"level":0,"type":"ULItem","content":[{"type":"Text","value":"lastMouseUpPositionAfterRangeChange: The last position where the mouseup event occurred after a range change."}]},{"level":0,"type":"ULItem","content":[{"type":"Text","value":"mousePosition：The current position of the mouse."}]},{"level":0,"type":"ULItem","content":[{"type":"Text","value":"selectionRange：The selection object represented as a Minditor DocRange type."}]},{"level":0,"type":"ULItem","content":[{"type":"Text","value":"hasRange：Indicates whether there is a selection range."}]},{"level":0,"type":"ULItem","content":[{"type":"Text","value":"rangeBeforeComposition：The selection range before the appearance of an input method."}]},{"level":0,"type":"ULItem","content":[{"type":"Text","value":"lastMouseEnteredBlock：The last Block that triggered the mouseenter event."}]},{"level":0,"type":"ULItem","content":[{"type":"Text","value":"visibleRangeRect：The boundRect object of the selection range."}]},{"level":0,"type":"ULItem","content":[{"type":"Text","value":"bodyViewPortSize：The size of the visible area of the body."}]},{"type":"Heading","level":0,"useIndex":true,"content":[{"type":"Text","value":"Roadmap"}]},{"type":"Heading","level":1,"useIndex":true,"content":[{"type":"Text","value":"AutoComplete Plugin"}]},{"type":"Paragraph","content":[{"type":"Text","value":"Supporting autocomplete based on user context to provide a foundation for integrating AI Copilot."}]},{"type":"Heading","level":1,"useIndex":true,"content":[{"type":"Text","value":"File Upload Block"}]},{"type":"Paragraph","content":[{"type":"Text","value":"More file upload and preview types."}]},{"type":"Heading","level":1,"useIndex":true,"content":[{"type":"Text","value":"Data Table"}]},{"type":"Paragraph","content":[{"type":"Text","value":"Support for a Data Table with full sorting, filtering, and other functionalities."}]},{"type":"Heading","level":1,"useIndex":true,"content":[{"type":"Text","value":"Block level collaborative editing"}]},{"type":"Paragraph","content":[{"type":"Text","value":"Block-level collaborative editing, supporting block-level locking and individual authorization.\""}]},{"type":"Heading","level":1,"useIndex":true,"content":[{"type":"Text","value":"More requests from community"}]},{"type":"Paragraph","content":[{"type":"Text","value":"We welcome users to submit more feature requests."}]},{"type":"Heading","level":0,"useIndex":true,"content":[{"type":"Text","value":"Support"}]},{"type":"Paragraph","content":[{"type":"Text","value":"Minditor is currently developed and maintained independently by "},{"type":"Link","href":"https://github.com/sskyy","alt":"Zhenyu Hou"},{"type":"Text","value":". Your support will be used to hire developers to continue maintaining this project and developing new features. All support expenses are used to develop features that are open source, free, and available for everyone in the community to use."}]},{"type":"Paragraph","content":[{"type":"Text","value":"Sponsor this project on "},{"type":"Link","href":"https://patreon.com/sskyy","alt":"https://patreon.com/sskyy"},{"type":"Text","value":" ."}]},{"type":"Paragraph","content":[{"type":"Text","value":""}]}]}